<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Appointment Booking</title>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Roboto', sans-serif;
    }
    .category-card, .appointment-type-card, .clinician-card {
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    .category-card:hover, .appointment-type-card:hover, .clinician-card:hover {
      background-color: #f0f0f0;
    }
    .form-section {
      display: none;
      flex-direction: column;
    }
    .form-section.active {
      display: flex;
    }
    .close-button {
      position: absolute;
      right: 20px;
      top: 20px;
      font-size: 24px;
      text-decoration: none;
      color: black;
    }
  </style>
</head>
<body>
<a href="<%= appointments_path %>" class="close-button">X</a>
  <div class="side-bottom-margin-container">
    <div class="appointmentbooking">
      <div id="category-list" class="form-section">
        <div class="booking-index-headings">

          <!-- How can we assist you today? -->
          <h1>How can we assist you today?</h1>
        </div>
        <div class="category-card" data-category="admin">
          <h3>Administrative Issues</h3>
          <p>For any non-clinical or administrative questions or concerns.</p>
        </div>
        <div class="category-card" data-category="test_results">
          <h3>Test Results</h3>
          <p>Discuss your test results and plan the next steps.</p>
        </div>
        <div class="category-card" data-category="muscles_and_joints">
          <h3>Muscle and Joint Problems</h3>
          <p>Issues with your back, neck, shoulders, or other muscles and joints.</p>
        </div>
        <div class="category-card" data-category="contraception">
          <h3>Contraception</h3>
          <p>Guidance and prescriptions for contraceptive options.</p>
        </div>
        <div class="category-card" data-category="breathing_conditions_and_allergies">
          <h3>Breathing Conditions & Allergies</h3>
          <p>Management of asthma, hay fever, and other breathing-related concerns.</p>
        </div>
        <div class="category-card" data-category="mental_health">
          <h3>Mental Health</h3>
          <p>Advice and support for mental health issues.</p>
        </div>
        <div class="category-card" data-category="prescriptions">
          <h3>Prescriptions</h3>
          <p>Help with new or repeat prescription requests and reviews.</p>
        </div>
        <div class="category-card" data-category="diabetes_care">
          <h3>Diabetes Care</h3>
          <p>Support and advice for diabetes and pre-diabetes management.</p>
        </div>
        <div class="category-card" data-category="cold_cough_flu_sore_throat_and_earaches">
          <h3>Cold, Cough, Flu, Sore Throat & Earaches</h3>
          <p>Help with symptoms like runny nose, fever, sore throat, and ear pain.</p>
        </div>
        <div class="category-card" data-category="skin_issues">
          <h3>Skin Problems</h3>
          <p>Treatment for rashes, acne, eczema, infections, lumps, or moles.</p>
        </div>
        <div class="category-card" data-category="stomach_problems">
          <h3>Stomach Issues</h3>
          <p>Addressing nausea, abdominal pain, bloating, constipation, or diarrhea.</p>
        </div>
        <div class="category-card" data-category="urine_problems">
          <h3>Urinary Problems</h3>
          <p>Trouble with urination, including pain or frequent urination.</p>
        </div>
        <div class="category-card" data-category="travel_health">
          <h3>Travel Health</h3>
          <p>Travel advice and necessary vaccinations for trips abroad.</p>
        </div>
        <div class="category-card" data-category="other">
          <h3>Other Concerns</h3>
          <p>Describe your symptoms if they don't fit into the categories above.</p>
        </div>
      </div>

   <div id="triage-questions" class="form-section">
        <div class="booking-index-headings">
          <h1 id="triage-title"></h1>
        </div>
        <div id="questions-container"></div>
        <button id="submit-triage">Submit</button>
        <button class="back-button">Back</button>
      </div>

     <div id="reason-for-appointment" class="form-section">
        <div class="booking-index-headings">
          <h1>Why would you like an appointment?</h1>
        </div>
        <p>Tell us about your symptoms, condition, or reason for booking (200 characters)</p>
        <textarea id="appointment-reason" maxlength="200" rows="4"></textarea>
        <button id="submit-reason">Submit</button>
        <button class="back-button">Back</button>
      </div>

    <div id="appointment-type-list" class="form-section">
      <div class="text-center">
        <h1>Choose your appointment type</h1>
      </div>
      <div class="d-flex justify-content-around">
        <div class="appointment-type-card card p-3" data-appointment-type="phone">
          <i class="fas fa-phone fa-2x"></i>
          <span>Phone</span>
        </div>
        <div class="appointment-type-card card p-3" data-appointment-type="video">
          <i class="fas fa-video fa-2x"></i>
          <span>Video Call</span>
        </div>
        <div class="appointment-type-card card p-3" data-appointment-type="in-person">
          <i class="fas fa-user fa-2x"></i>
          <span>In-person</span>
        </div>
      </div>
      <button class="back-button btn btn-secondary mt-3">Back</button>
    </div>

    <div id="available-clinicians" class="form-section">
      <div class="text-center">
        <h2>Available Clinicians</h2>
      </div>
      <div id="clinicians-container" class="d-flex flex-wrap justify-content-around">
        <!-- Clinician cards will be inserted here -->
      </div>
      <button class="back-button btn btn-secondary mt-3">Back</button>
    </div>

    <div id="calendar-view" class="form-section">
      <div class="text-center">
        <h2>Select Date and Time</h2>
      </div>
      <input type="text" id="calendar-container" class="form-control mt-3" />
      <div id="available-times" class="d-flex flex-column justify-content-center align-items-center mt-3">
        <!-- Available times will be shown here -->
      </div>
      <button id="close-calendar" class="btn btn-secondary mt-3">Close</button>
      <button class="back-button btn btn-secondary mt-3">Back</button>
    </div>

    <div id="booking-details" class="form-section">
      <div class="text-center">
        <h2>Booking Details</h2>
      </div>
      <div id="details-container" class="mt-3">
        <!-- Booking details will be inserted here -->
      </div>
      <button id="confirm-booking" class="btn btn-primary mt-3">Confirm Booking</button>
      <button class="back-button btn btn-secondary mt-3">Back</button>
    </div>

    <div id="appointment-pending" class="form-section">
      <div class="text-center">
        <h1>Appointment Request Pending</h1>
      </div>
      <p>Thank you for requesting an appointment.</p>
      <p>Your appointment request has been received and is currently pending approval from the clinician.</p>
      <h3>Additional Information:</h3>
      <p>Pending Approval: Your requested appointment is awaiting confirmation from the clinician. You will receive an update as soon as your appointment status changes.</p>
      <h3>Need to make changes?</h3>
      <p>If you need to modify or cancel your appointment request, you can do this within the 'My Appointments' section</p>
      <footer>
        <p>Please note that the availability of appointments may vary based on clinician schedules.</p>
      </footer>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://kit.fontawesome.com/a076d05399.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const categoryList = document.getElementById('category-list');
      const triageQuestions = document.getElementById('triage-questions');
      const triageTitle = document.getElementById('triage-title');
      const questionsContainer = document.getElementById('questions-container');
      const reasonForAppointment = document.getElementById('reason-for-appointment');
      const appointmentTypeList = document.getElementById('appointment-type-list');
      const availableClinicians = document.getElementById('available-clinicians');
      const cliniciansContainer = document.getElementById('clinicians-container');
      const calendarView = document.getElementById('calendar-view');
      const calendarContainer = document.getElementById('calendar-container');
      const availableTimes = document.getElementById('available-times');
      const closeCalendarButton = document.getElementById('close-calendar');
      const bookingDetails = document.getElementById('booking-details');
      const detailsContainer = document.getElementById('details-container');
      const confirmBookingButton = document.getElementById('confirm-booking');
      const backButtons = document.querySelectorAll('.back-button');
      const closeButton = document.querySelector('.close-button');
      const appointmentPending = document.getElementBy
