<div>
  <%# Select symptom category page %>
  <div>
    <h1>What can we help with?</h1>
  </div>

  <div id="category-list">
    <div class="category-card" data-category="admin">Admin</div>
    <div class="category-card" data-category="test_results">Test Results</div>
    <div class="category-card" data-category="muscles_and_joints">Muscles and Joints</div>
    <div class="category-card" data-category="contraception">Contraception</div>
    <div class="category-card" data-category="breathing_conditions_and_allergies">Breathing conditions & Allergies</div>
    <div class="category-card" data-category="mental_health">Mental health</div>
    <div class="category-card" data-category="prescriptions">Prescriptions</div>
    <div class="category-card" data-category="diabetes_care">Diabetes Care</div>
    <div class="category-card" data-category="cold_cough_flu_sore_throat_and_earaches">Cold, cough, flu, sore throat & Earaches</div>
    <div class="category-card" data-category="skin_issues">Skin issues</div>
    <div class="category-card" data-category="stomach_problems">Stomach problems</div>
    <div class="category-card" data-category="urine_problems">Urine problems</div>
    <div class="category-card" data-category="travel_health">Travel health</div>
    <div class="category-card" data-category="other">Other</div>
  </div>

  <div id="triage-questions">
    <h2 id="triage-title"></h2>
    <div id="questions-container"></div>
    <button id="submit-triage">Submit</button>
  </div>

  <div>
    <h1>Why would you like an appointment?</h1>
    <h3>Tell us about your symptoms, condition, or reason for booking (200 characters)</h3>
  </div>

  <%= link_to 'Back', appointments_path %>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const categoryList = document.getElementById('category-list');
    const triageQuestions = document.getElementById('triage-questions');
    const triageTitle = document.getElementById('triage-title');
    const questionsContainer = document.getElementById('questions-container');

    const triageData = {
      'admin': ['Question 1 for Admin?', 'Question 2 for Admin?', 'Question 3 for Admin?', 'Question 4 for Admin?'],
      'test_results': ['Question 1 for Test Results?', 'Question 2 for Test Results?', 'Question 3 for Test Results?', 'Question 4 for Test Results?'],
      'muscles_and_joints': ['Question 1 for Muscles and Joints?', 'Question 2 for Muscles and Joints?', 'Question 3 for Muscles and Joints?', 'Question 4 for Muscles and Joints?'],
      'contraception': ['Question 1 for Contraception?', 'Question 2 for Contraception?', 'Question 3 for Contraception?', 'Question 4 for Contraception?'],
      'breathing_conditions_and_allergies': ['Question 1 for Breathing conditions & Allergies?', 'Question 2 for Breathing conditions & Allergies?', 'Question 3 for Breathing conditions & Allergies?', 'Question 4 for Breathing conditions & Allergies?'],
      'mental_health': ['Question 1 for Mental health?', 'Question 2 for Mental health?', 'Question 3 for Mental health?', 'Question 4 for Mental health?'],
      'prescriptions': ['Question 1 for Prescriptions?', 'Question 2 for Prescriptions?', 'Question 3 for Prescriptions?', 'Question 4 for Prescriptions?'],
      'diabetes_care': ['Question 1 for Diabetes Care?', 'Question 2 for Diabetes Care?', 'Question 3 for Diabetes Care?', 'Question 4 for Diabetes Care?'],
      'cold_cough_flu_sore_throat_and_earaches': ['Question 1 for Cold, cough, flu, sore throat & Earaches?', 'Question 2 for Cold, cough, flu, sore throat & Earaches?', 'Question 3 for Cold, cough, flu, sore throat & Earaches?', 'Question 4 for Cold, cough, flu, sore throat & Earaches?'],
      'skin_issues': ['Question 1 for Skin issues?', 'Question 2 for Skin issues?', 'Question 3 for Skin issues?', 'Question 4 for Skin issues?'],
      'stomach_problems': ['Question 1 for Stomach problems?', 'Question 2 for Stomach problems?', 'Question 3 for Stomach problems?', 'Question 4 for Stomach problems?'],
      'urine_problems': ['Question 1 for Urine problems?', 'Question 2 for Urine problems?', 'Question 3 for Urine problems?', 'Question 4 for Urine problems?'],
      'travel_health': ['Question 1 for Travel health?', 'Question 2 for Travel health?', 'Question 3 for Travel health?', 'Question 4 for Travel health?'],
      'other': ['Question 1 for Other?', 'Question 2 for Other?', 'Question 3 for Other?', 'Question 4 for Other?']
    };

    categoryList.addEventListener('click', function(event) {
      if (event.target && event.target.matches('.category-card')) {
        const category = event.target.getAttribute('data-category');
        const questions = triageData[category];

        triageTitle.textContent = event.target.textContent;
        questionsContainer.innerHTML = '';

        questions.forEach(question => {
          const questionElement = document.createElement('div');
          questionElement.className = 'question';
          questionElement.textContent = question;

          const buttonsContainer = document.createElement('div');
          buttonsContainer.className = 'question-buttons';

          const yesButton = document.createElement('button');
          yesButton.textContent = 'Yes';
          yesButton.setAttribute('data-answer', 'yes');

          const noButton = document.createElement('button');
          noButton.textContent = 'No';
          noButton.setAttribute('data-answer', 'no');

          buttonsContainer.appendChild(yesButton);
          buttonsContainer.appendChild(noButton);

          questionElement.appendChild(buttonsContainer);
          questionsContainer.appendChild(questionElement);
        });

        categoryList.style.display = 'none';
        triageQuestions.style.display = 'block';
      }
    });

    document.getElementById('submit-triage').addEventListener('click', function() {
      // Handle the triage submission
      alert('Triage submitted!');
      // Redirect or show a confirmation message
    });
  });
</script>
